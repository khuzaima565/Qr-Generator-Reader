{"version":3,"sources":["script.js"],"names":["document","addEventListener","qrInput","getElementById","generateBtn","qrCode","startBtn","video","output","fileInput","downloadBtn","qrValue","value","innerHTML","qr","QRCode","text","width","height","colorDark","colorLight","setAttribute","_el","firstChild","toDataURL","alert","style","display","startQRCodeScanning","constraints","facingMode","navigator","mediaDevices","getUserMedia","stream","srcObject","play","requestAnimationFrame","tick","console","error","readyState","HAVE_ENOUGH_DATA","canvas","createElement","videoWidth","videoHeight","context","getContext","drawImage","imageData","getImageData","code","jsQR","data","textContent","stopVideoStream","tracks","getTracks","forEach","track","stop","event","file","target","files","reader","FileReader","onload","e","img","Image","src","result","readAsDataURL"],"mappings":"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","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    const qrInput = document.getElementById('qr-input');\r\n    const generateBtn = document.getElementById('generate-btn');\r\n    const qrCode = document.getElementById('qr-code');\r\n    const startBtn = document.getElementById('start-btn');\r\n    const video = document.getElementById('video');\r\n    const output = document.getElementById('output');\r\n    const fileInput = document.getElementById('file-input');\r\n    const downloadBtn = document.getElementById('download-btn');\r\n\r\n    generateBtn.addEventListener('click', () => {\r\n        const qrValue = qrInput.value;\r\n        if (qrValue) {\r\n            qrCode.innerHTML = '';\r\n            const qr = new QRCode(qrCode, {\r\n                text: qrValue,\r\n                width: 256,\r\n                height: 256,\r\n                colorDark: \"#ffffff\",\r\n                colorLight: \"#00216e\",\r\n            });\r\n            downloadBtn.setAttribute('href', qr._el.firstChild.toDataURL(\"image/png\"));\r\n            downloadBtn.setAttribute('download', 'qr-code.png');\r\n        } else {\r\n            alert('Please enter a valid text or URL');\r\n        }\r\n    });\r\n\r\n    startBtn.addEventListener('click', () => {\r\n        video.style.display = 'block';\r\n        startQRCodeScanning();\r\n    });\r\n\r\n    async function startQRCodeScanning() {\r\n        try {\r\n            const constraints = {\r\n                video: { facingMode: 'environment' }\r\n            };\r\n            const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n            video.srcObject = stream;\r\n            video.setAttribute('playsinline', true);\r\n            video.play();\r\n            requestAnimationFrame(tick);\r\n        } catch (error) {\r\n            console.error('Error accessing the camera: ', error);\r\n        }\r\n    }\r\n\r\n    function tick() {\r\n        if (video.readyState === video.HAVE_ENOUGH_DATA) {\r\n            const canvas = document.createElement('canvas');\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            const context = canvas.getContext('2d');\r\n            context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n            const code = jsQR(imageData.data, canvas.width, canvas.height);\r\n            if (code) {\r\n                output.textContent = `QR Code Data: ${code.data}`;\r\n                video.style.display = 'none';\r\n                stopVideoStream();\r\n            } else {\r\n                requestAnimationFrame(tick);\r\n            }\r\n        } else {\r\n            requestAnimationFrame(tick);\r\n        }\r\n    }\r\n\r\n    function stopVideoStream() {\r\n        const stream = video.srcObject;\r\n        const tracks = stream.getTracks();\r\n        tracks.forEach(track => track.stop());\r\n        video.srcObject = null;\r\n    }\r\n\r\n    fileInput.addEventListener('change', (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = function(e) {\r\n                const img = new Image();\r\n                img.onload = function() {\r\n                    const canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    const context = canvas.getContext('2d');\r\n                    context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n                    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n                    const code = jsQR(imageData.data, canvas.width, canvas.height);\r\n                    if (code) {\r\n                        output.textContent = `QR Code Data: ${code.data}`;\r\n                    } else {\r\n                        output.textContent = 'No QR code found.';\r\n                    }\r\n                };\r\n                img.src = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    });\r\n});\r\n"],"file":"script.dev.js"}